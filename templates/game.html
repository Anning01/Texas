{% extends "base.html" %}

{% block title %}Âæ∑Â∑ûÊâëÂÖã - {{ room_name }}{% endblock %}

{% block content %}
<div class="game-page">
    <!-- È°∂ÈÉ®‰ø°ÊÅØÊ†è -->
    <header class="game-header">
        <div class="room-info">
            <span class="room-name">{{ room_name }}</span>
            <span class="room-id">ID: {{ room_id }}</span>
        </div>
        <div class="game-info">
            <span class="stage" id="stage">Á≠âÂæÖ‰∏≠</span>
            <span class="pot">Â∫ïÊ±†: <strong id="pot">0</strong></span>
            <span class="blinds" id="blinds"></span>
        </div>
        <div class="header-right">
            <div class="timer-display" id="timer-display" style="display:none;">
                <span class="timer-icon">‚è±</span>
                <span class="timer-value" id="timer-value">30</span>
            </div>
            <form action="/leave-room/{{ room_id }}" method="post" class="leave-form">
                <button type="submit" class="btn btn-leave">Á¶ªÂºÄ</button>
            </form>
        </div>
    </header>

    <div class="game-body">
        <!-- ÁâåÊ°åÂå∫Âüü -->
        <main class="poker-table">
            <!-- Ê§≠ÂúÜÂΩ¢ÁâåÊ°å -->
            <div class="table-felt">
                <div class="table-inner">
                    <!-- ÂÖ¨ÂÖ±ÁâåÂå∫Âüü -->
                    <div class="community-section">
                        <div class="community-cards" id="community-cards">
                            <div class="card card-placeholder"></div>
                            <div class="card card-placeholder"></div>
                            <div class="card card-placeholder"></div>
                            <div class="card card-placeholder"></div>
                            <div class="card card-placeholder"></div>
                        </div>
                        <div class="pot-display">
                            <span class="pot-label">Â∫ïÊ±†</span>
                            <span class="pot-value" id="pot-display">0</span>
                        </div>
                    </div>
                </div>

                <!-- Áé©ÂÆ∂‰ΩçÁΩÆ -->
                <div class="players-area" id="players-area">
                    <!-- Âä®ÊÄÅÁîüÊàêÁé©ÂÆ∂‰ΩçÁΩÆ -->
                </div>
            </div>

            <!-- Â∫ïÈÉ®Êìç‰ΩúÊ†èÔºàÂú®ÁâåÊ°åÂÜÖÔºâ -->
            <div class="action-bar" id="action-bar">
                <div class="my-hand" id="my-hand">
                    <!-- ÊàëÁöÑÊâãÁâå -->
                </div>

                <div class="my-info" id="my-info">
                    <span class="my-chips"><span id="my-chips">0</span></span>
                </div>

                <div class="actions" id="actions">
                    <!-- Á≠âÂæÖÁä∂ÊÄÅÊìç‰Ωú -->
                    <div class="waiting-actions" id="waiting-actions">
                        <button class="btn btn-start" id="btn-start" style="display:none;">ÂºÄÂßãÊ∏∏Êàè</button>
                        <p class="waiting-text" id="waiting-text">Á≠âÂæÖÊõ¥Â§öÁé©ÂÆ∂Âä†ÂÖ•...</p>
                    </div>

                    <!-- Ê∏∏Êàè‰∏≠ÁöÑÊìç‰ΩúÊåâÈíÆ -->
                    <div class="game-actions" id="game-actions" style="display:none;">
                        <button class="btn btn-fold" id="btn-fold">ÂºÉÁâå</button>
                        <button class="btn btn-check" id="btn-check">ËøáÁâå</button>
                        <button class="btn btn-call" id="btn-call">Ë∑üÊ≥® <span id="call-amount"></span></button>
                        <div class="raise-group">
                            <input type="range" id="raise-slider" min="0" max="1000" value="0">
                            <input type="number" id="raise-amount" min="0" value="0">
                            <button class="btn btn-bet" id="btn-bet">‰∏ãÊ≥®</button>
                            <button class="btn btn-raise" id="btn-raise">Âä†Ê≥®</button>
                        </div>
                        <button class="btn btn-allin" id="btn-allin">ÂÖ®Êäº</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- ‰æßËæπÊ†èÔºöËÅäÂ§©ÂíåÂéÜÂè≤ -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-tabs">
                <button class="tab-btn active" data-tab="chat">ËÅäÂ§©</button>
                <button class="tab-btn" data-tab="history">ËÆ∞ÂΩï</button>
            </div>

            <div class="tab-content" id="tab-chat">
                <div class="chat-messages" id="chat-messages">
                    <!-- ËÅäÂ§©Ê∂àÊÅØ -->
                </div>
                <div class="chat-input-area">
                    <input type="text" id="chat-input" placeholder="ËæìÂÖ•Ê∂àÊÅØ..." maxlength="200">
                    <button class="btn btn-send" id="btn-send">ÂèëÈÄÅ</button>
                </div>
            </div>

            <div class="tab-content" id="tab-history" style="display:none;">
                <div class="action-history" id="action-history">
                    <!-- Êìç‰ΩúÂéÜÂè≤ -->
                </div>
            </div>
        </aside>
    </div>

    <!-- ÁªìÊûúÂºπÁ™ó -->
    <div class="modal" id="result-modal" style="display:none;">
        <div class="modal-content">
            <h2>Êú¨Â±ÄÁªìÊûú</h2>
            <div class="winners-list" id="winners-list"></div>
            <button class="btn btn-primary" id="btn-close-modal">Á°ÆÂÆö</button>
        </div>
    </div>

    <!-- ÁßªÂä®Á´Ø‰æßËæπÊ†èÂàáÊç¢ÊåâÈíÆ -->
    <button class="sidebar-toggle" id="sidebar-toggle">üí¨</button>
</div>
{% endblock %}

{% block scripts %}
<script>
    const ROOM_ID = "{{ room_id }}";
    const PLAYER_ID = "{{ player_id }}";
    const PLAYER_NAME = "{{ player_name }}";
</script>
<script src="/static/js/game.js"></script>
{% endblock %}
